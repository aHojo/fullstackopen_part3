(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{25:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(20),u=n.n(c),i=(n(25),n(11)),o=n(9),s=n(4),b=n(0),d=function(e){var t=e.name,n=e.number,r=e.hChange,a=e.hSubmit;return Object(b.jsxs)("form",{onSubmit:a,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{name:"name",value:t,onChange:r}),Object(b.jsx)("br",{}),"number: ",Object(b.jsx)("input",{name:"number",value:n,onChange:r})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var t=e.filter,n=e.handleFilter;return Object(b.jsxs)(a.a.Fragment,{children:[Object(b.jsx)("h3",{children:"Filter by name"}),Object(b.jsx)("input",{value:t,onChange:n})]})},l=function(e){var t=e.name,n=e.number,r=e.id,a=e.hDelete;return Object(b.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(b.jsxs)("p",{children:[t," ","=>"," ",n]}),Object(b.jsx)("button",{onClick:function(){return a(r)},children:"Delete"})]})},f=function(e){var t=e.message,n=e.isErr;return Object(b.jsx)("div",{className:n?"error":"m-added",children:t})},h=n(3),O=n.n(h),m=n(6),p=n(7),v=n.n(p),x="/api/persons",w={getAll:function(){var e=Object(m.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(x);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addOne:function(){var e=Object(m.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post(x,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteOne:function(){var e=Object(m.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("".concat(x,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateOne:function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat(x,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};var g=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),u=Object(s.a)(c,2),h=u[0],O=u[1],m=Object(r.useState)(""),p=Object(s.a)(m,2),v=p[0],x=p[1],g=Object(r.useState)(""),y=Object(s.a)(g,2),C=y[0],k=y[1],S=Object(r.useState)(null),E=Object(s.a)(S,2),L=E[0],D=E[1],F=Object(r.useState)(!1),N=Object(s.a)(F,2),A=N[0],I=N[1];Object(r.useEffect)((function(){w.getAll().then((function(e){a(Object(o.a)(e))}))}),[]);var J=function(e){w.deleteOne(e).then((function(t){a(n.filter((function(t){return t.id!==e})))}))},P=""===C?n:n.filter((function(e){return e.name.toLowerCase().includes(C)}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),L&&Object(b.jsx)(f,{message:L,isErr:A}),Object(b.jsx)(j,{filter:C,handleFilter:function(e){return k(e.target.value)}}),Object(b.jsx)("h3",{children:"Add New Person"}),Object(b.jsx)(d,{name:h,number:v,hChange:function(e){return"name"===e.target.name?O(e.target.value):x(e.target.value)},hSubmit:function(e){if(e.preventDefault(),console.log("new Name",h,"persons",n),function(e,t){var n=!1;return t.forEach((function(t){t.name.toLowerCase()===e.toLowerCase()&&(n=!0)})),n}(h,n)){if(window.confirm("".concat(h,"  already exists, replace the old number with the new one? "))){var t=n.find((function(e){return e.name.toLowerCase()===h.toLowerCase()})),r=Object(i.a)(Object(i.a)({},t),{},{number:v});w.updateOne(r.id,r).then((function(e){var t=n.filter((function(t){return t.id!==e.id}));a([].concat(Object(o.a)(t),[e]))})).catch((function(e){I(!0),D("".concat(h," was already deleted. ")),window.setTimeout((function(){return D(null)}),2e3)}))}}else w.addOne({name:h,number:v}).then((function(e){a([].concat(Object(o.a)(n),[e])),O(""),x(""),I(!0),D("".concat(h," has been added")),window.setTimeout((function(){return D(null)}),1e3)}))}}),Object(b.jsx)("h2",{children:"Numbers"}),P.map((function(e){return Object(b.jsx)(l,{name:e.name,number:e.number,id:e.id,hDelete:J},e.name)}))]})};u.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(g,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.81b07bc5.chunk.js.map